<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.8.25">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


    <title>nonviolence-only-road</title>
    <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.columns{display: flex; gap: min(4vw, 1.5em);}
      div.column{flex: auto; overflow-x: auto;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      ul.task-list li input[type="checkbox"] {
        width: 0.8em;
        margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
        vertical-align: middle;
      }
    </style>

    <style>
      body.hypothesis-enabled #quarto-embed-header {
        padding-right: 36px;
      }

      #quarto-embed-header {
        height: 3em;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: solid 1px;
      }

      #quarto-embed-header h6 {
        font-size: 1.1em;
        padding-top: 0.6em;
        margin-left: 1em;
        margin-right: 1em;
        font-weight: 400;
      }

      #quarto-embed-header a.quarto-back-link,
      #quarto-embed-header a.quarto-download-embed {
        font-size: 0.8em;
        margin-top: 1em;
        margin-bottom: 1em;
        margin-left: 1em;
        margin-right: 1em;
      }

      .quarto-back-container {
        padding-left: 0.5em;
        display: flex;
      }

      .headroom {
          will-change: transform;
          transition: transform 200ms linear;
      }

      .headroom--pinned {
          transform: translateY(0%);
      }

      .headroom--unpinned {
          transform: translateY(-100%);
      }      
    </style>

    <script>
    window.document.addEventListener("DOMContentLoaded", function () {

      var header = window.document.querySelector("#quarto-embed-header");
      const titleBannerEl = window.document.querySelector("body > #title-block-header");
      if (titleBannerEl) {
        titleBannerEl.style.paddingTop = header.clientHeight + "px";
      }
      const contentEl = window.document.getElementById('quarto-content');
      for (const child of contentEl.children) {
        child.style.paddingTop = header.clientHeight + "px";
        child.style.marginTop = "1em";
      }

      // Use the article root if the `back` call doesn't work. This isn't perfect
      // but should typically work
      window.quartoBackToArticle = () => {
        var currentUrl = window.location.href;
        window.history.back();
        setTimeout(() => {
            // if location was not changed in 100 ms, then there is no history back
            if(currentUrl === window.location.href){              
                // redirect to site root
                window.location.href = "../index.html";
            }
        }, 100);
      }

      const headroom = new window.Headroom(header, {
        tolerance: 5,
        onPin: function () {
        },
        onUnpin: function () {
        },
      });
      headroom.init();
    });
    </script>

    
<script src="../site_libs/manuscript-notebook/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-a74871fe4945b66d259aafc266475145.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
     
      </head>

  <body class="quarto-notebook quarto-light">
    <div id="quarto-embed-header" class="headroom fixed-top bg-primary">
      
      <a onclick="window.quartoBackToArticle(); return false;" class="btn btn-primary quarto-back-link" href=""><i class="bi bi-caret-left"></i> Back to Article</a>
      <h6><i class="bi bi-journal-code"></i> 1966-10-01_nonviolence-only-road.qmd</h6>

            <a href="../corpus_simple_qmd/1966-10-01_nonviolence-only-road.qmd" class="btn btn-primary quarto-download-embed" download="1966-10-01_nonviolence-only-road.qmd">Download Source</a>
          </div>

     <div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">    <p>Nonviolence: The Only Road to Freedom</p>
<p>The year 1966 brought with it the first public challenge to the philosophy and strategy of nonviolence from within the ranks of the civil rights movement. Resolutions of self-defense and Black Power sounded forth from our friends and brothers. At the same time riots erupted in several major cities. Inevitably a link was made between the two phenomena though movement leadership continued to deny any implications of violence in the concept of Black Power.</p>
<p>The nation’s press heralded these incidents as an end of the Negro’s reliance on nonviolence as a means of achieving freedom. Articles appeared on “The Plot to Get Whitey,” and, “Must Negroes fight back?” and one had the impression that a serious movement was underway to lead the Negro to freedom through the use of violence.</p>
<p>Indeed, there was much talk of violence. It was the same talk we have heard on the fringes of the nonviolent movement for the past ten years. It was the talk of fearful men, saying that they would not join the nonviolent movement because they would not remain nonviolent if attacked. Now the climate had shifted so that it was even more popular to talk of violence, but in spite of the talk of violence there emerged no action in this direction. One reporter pointed out in a recent New Yorker article, that the fact that Beckwith, Price, Rainey, and Collie Leroy Wilkins remain alive is living testimony to the fact that the Negro remains nonviolent. And if this is not enough, a mere check of the statistics of casualties in the recent riots shows that the vast majority of persons killed in riots are Negroes. All the reports of sniping in Los Angeles’s expressways did not produce a single casualty. The young demented white student at the University of Texas has shown what damage a sniper can do when he is serious. In fact, this one young man killed more people in one day than all the Negroes have killed in all the riots in all the cities since the Harlem riots of 1964. This must raise a serious question about the violent intent of the Negro, for certainly there are many ex-GIs within our ghettos, and no small percentage of those recent migrants from the South have demonstrated some proficiency hunting squirrels and rabbits.</p>
<p>I can only conclude that the Negro, even in his bitterest moments, is not intent on killing white men to be free. This does not mean that the Negro is a saint who abhors violence. Unfortunately, a check of the hospitals in any Negro community on any Saturday night will make you painfully aware of the violence within the Negro community. Hundreds of victims of shooting and cutting lie bleeding in the emergency rooms, but there is seldom if ever a white person who is the victim of Negro hostility.</p>
<p>I have talked with many persons in the ghettos of the North who argue eloquently for the use of violence. But I observed none of them in the mobs that rioted in Chicago. I have heard the street-corner preachers in Harlem and in Chicago’s Washington Park, but in spite of the bitterness preached and the hatred espoused, none of them has ever been able to start a riot. So far, only the police through their fears and prejudice have goaded our people to riot. And once the riot starts, only the police or the National Guard have been able to put an end to them. This demonstrates that these violent eruptions are unplanned, uncontrollable temper tantrums brought on by long-neglected poverty, humiliation, oppression and exploitation. Violence as a strategy for social change in America is nonexistent. All the sound and fury seems but the posturing of cowards whose bold talk produces no action and signifies nothing.</p>
<p>I am convinced that for practical as well as moral reasons, nonviolence offers the only road to freedom for my people. In violent warfare, one must be prepared to face ruthlessly the fact that there will be casualties by the thousands. In Vietnam, the United States has evidently decided that it is willing to slaughter millions, sacrifice some two hundred thousand men and twenty billion dollars a year to secure the freedom of some fourteen million Vietnamese. This is to fight a war on Asian soil, where Asians are in the majority. Anyone leading a violent conflict must be willing to make a similar assessment regarding the possible casualties to a minority population confronting a well-armed, wealthy majority with a fanatical right wing that is capable of exterminating the entire black population and which would not hesitate such an attempt if the survival of white Western materialism were at stake.</p>
<p>Arguments that the American Negro is a part of a world which is two-thirds colored and that there will come a day when the oppressed people of color will rise together to throw off the yoke of white oppression are at least fifty years away from being relevant. There is no colored nation, including China, which now shows even the potential of leading a revolution of color in any international proportion. Ghana, Zambia, Tanzania and Nigeria are fighting their own battles for survival against poverty, illiteracy and the subversive influence of neocolonialism, so that they offer no hope to Angola, Southern Rhodesia and South Africa, and much less to the American Negro.</p>
<p>The hard cold facts of racial life in the world today indicate that the hope of the people of color in the world may well rest on the American Negro and his ability to reform the structures of racist imperialism from within and thereby turn the technology and wealth of the West to the task of liberating the world from want.</p>
<p>This is no time for romantic illusions about freedom and empty philosophical debate. This is a time for action. What is needed is a strategy for change, a tactical program which will bring the Negro into the mainstream of American life as quickly as possible. So far, this has only been offered by the nonviolent movement.</p>
<p>Our record of achievement through nonviolent action is already remarkable. The dramatic social changes which have been made across the South are unmatched in the annals of history. Montgomery, Albany, Birmingham and Selma have paved the way for untold progress. Even more remarkable is the fact that this progress occurred with a minimum of human sacrifice and loss of life.</p>
<p>Not a single person has been killed in a nonviolent demonstration. The bombings of the 16th Street Baptist Church occurred several months after demonstrations stopped. Rev.&nbsp;James Reeb, Mrs.&nbsp;Viola Liuzzo and Jimmie Lee Jackson were all murdered at night following demonstrations. And fewer people have been killed in ten years of action across the South than were killed in three nights of rioting in Watts. No similar changes have occurred without infinitely more sufferings, whether it be Gandhi’s drive for independence in India or any African nation’s struggle for independence. THE QUESTION OF SELF-DEFENSE</p>
<p>There are many people who very honestly raise the question of self-defense. This must be placed in perspective. It goes without saying that people will protect their homes. This is a right guaranteed by the Constitution and respected even in the worst areas of the South. But the mere protection of one’s home and person against assault by lawless night riders does not provide any positive approach to the fears and conditions which produce violence. There must be some program for establishing law. Our experience in places like Savannah and Macon, Georgia, has been that a drive which registers Negroes to vote can do more to provide protection of the law and respect for Negroes by even racist sheriffs than anything we have seen.</p>
<p>In a nonviolent demonstration, self-defense must be approached from quite another perspective. One must remember that the cause of the demonstration is some exploitation or form of oppression that has made it necessary for men of courage and good will to demonstrate against the evil. For example, a demonstration against the evil of de facto school segregation is based on the awareness that a child’s mind is crippled daily by inadequate educational opportunity. The demonstrator agrees that it is better for him to suffer publicly for a short time to end the crippling evil of school segregation than to have generation after generation of children suffer in ignorance.</p>
<p>In such a demonstration, the point is made that schools are inadequate. This is the evil to which one seeks to point; anything else detracts from that point and interferes with confrontation of the primary evil against which one demonstrates. Of course, no one wants to suffer and be hurt. But it is more important to get at the cause than to be safe. It is better to shed a little blood from a blow on the head or a rock thrown by an angry mob than to have children by the thousands grow up reading at a fifth-or sixth-grade level.</p>
<p>It is always amusing to me when a Negro man says that he can’t demonstrate with us because if someone hit him he would fight back. Here is a man whose children are being plagued by rats and roaches, whose wife is robbed daily at overpriced ghetto food stores, who himself is working for about two-thirds the pay of a white person doing a similar job and with similar skills, and in spite of all this daily suffering it takes someone spitting on him or calling him a nigger to make him want to fight.</p>
<p>Conditions are such for Negroes in America that all Negroes ought to be fighting aggressively. It is as ridiculous for a Negro to raise the question of self-defense in relation to nonviolence as it is for a soldier on the battlefield to say he is not going to take any risks. He is there because he believes that the freedom of his country is worth the risk of his life. The same is true of the nonviolent demonstrator. He sees the misery of his people so clearly that he volunteers to suffer in their behalf and put an end to their plight.</p>
<p>Furthermore, it is extremely dangerous to organize a movement around self-defense. The line between defensive violence and aggressive or retaliatory violence is a fine line indeed. When violence is tolerated even as a means of self-defense there is grave danger that in the fervor of emotion the main fight will be lost over the question of self-defense.</p>
<p>When my home was bombed in 1955 in Montgomery, many men wanted to retaliate, to place an armed guard on my home. But the issue there was not my life, but whether Negroes would achieve first-class treatment on the city’s buses. Had we become distracted by the question of my safety we would have lost the moral offensive and sunk to the level of our oppressors.</p>
<p>I must continue by faith or it is too great a burden to bear and violence, even in self-defense, creates more problems than it solves. Only a refusal to hate or kill can put an end to the chain of violence in the world and lead us toward a community where men can live together without fear. Our goal is to create a beloved community and this will require a qualitative change in our souls as well as a quantitative change in our lives. STRATEGY FOR CHANGE</p>
<p>The American racial revolution has been a revolution to “get in” rather than to overthrow. We want a share in the American economy, the housing market, the educational system and the social opportunities. This goal itself indicates that a social change in America must be nonviolent.</p>
<p>If one is in search of a better job, it does not help to burn down the factory. If one needs more adequate education, shooting the principal will not help, or if housing is the goal, only building and construction will produce that end. To destroy anything, person or property, can’t bring us closer to the goal that we seek.</p>
<p>The nonviolent strategy has been to dramatize the evils of our society in such a way that pressure is brought to bear against those evils by the forces of good will in the community and change is produced.</p>
<p>The student sit-ins of 1960 are a classic illustration of this method. Students were denied the right to eat at a lunch counter, so they deliberately sat down to protest their denial. They were arrested, but this made their parents mad and so they began to close their charge accounts. The students continued to sit in, and this further embarrassed the city, scared away many white shoppers and soon produced an economic threat to the business life of the city. Amid this type of pressure, it is not hard to get people to agree to change.</p>
<p>So far, we have had the Constitution backing most of the demands for change, and this has made our work easier, since we could be sure that the federal courts would usually back up our demonstrations legally. Now we are approaching areas where the voice of the Constitution is not clear. We have left the realm of constitutional rights and we are entering the area of human rights.</p>
<p>The Constitution assured the right to vote, but there is no such assurance of the right to adequate housing, or the right to an adequate income. And yet, in a nation which has a gross national product of 750 billion dollars a year, it is morally right to insist that every person has a decent house, an adequate education and enough money to provide basic necessities for one’s family. Achievement of these goals will be a lot more difficult and require much more discipline, understanding, organization and sacrifice.</p>
<p>It so happens that Negroes live in the central city of the major cities of the United States. These cities control the electoral votes of the large states of our nation. This means that though we are only ten percent of the nation’s population, we are located in such a key position geographically—the cities of the North and black belts of the South—that we are able to lead a political and moral coalition which can direct the course of the nation. Our position depends upon a lot more than political power, however. It depends upon our ability to marshal moral power as well. As soon as we lose the moral offensive, we are left with only our ten percent of the power of the nation. This is hardly enough to produce any meaningful changes, even within our own communities, for the lines of power control the economy as well and once the flow of money is cut off, progress ceases.</p>
<p>The past three years have demonstrated the power of a committed, morally sound minority to lead the nation. It was the coalition molded through the Birmingham movement which allied the forces of the churches, labor and the academic communities of the nation behind the liberal issues of our time. All of the liberal legislation of the past session of Congress can be credited to this coalition. Even the presence of a vital peace movement and the campus protest against the war in Vietnam can be traced back to the nonviolent action movement led by the Negro. Prior to Birmingham, our campuses were still in a state of shock over the McCarthy era and Congress was caught in the perennial deadlock of southern Democrats and midwestern Republicans. Negroes put the country on the move against the enemies of poverty, slums and inadequate education. TECHNIQUES OF THE FUTURE</p>
<p>When Negroes marched, so did the nation. The power of the nonviolent march is indeed a mystery. It is always surprising that a few hundred Negroes marching can produce such a reaction across the nation. When marches are carefully organized around well-defined issues, they represent the power which Victor Hugo phrased as the most powerful force in the world, “an idea whose time has come.” Marching feet announce that time has come for a given idea. When the idea is a sound one, the cause a just one, and the demonstration a righteous one, change will be forthcoming. But if any of these conditions are not present, the power for change is missing also. A thousand people demonstrating for the right to use heroin would have little effect. By the same token, a group of ten thousand marching in anger against a police station and cussing out the chief of police will do very little to bring respect, dignity and unbiased law enforcement. Such a demonstration would only produce fear and bring about an addition of forces to the station and more oppressive methods by the police.</p>
<p>Marches must continue in the future, and they must be the kind of marches that bring about the desired result. But the march is not a “one shot” victory-producing method. One march is seldom successful, and as my good friend Kenneth Clark points out in Dark Ghetto, it can serve merely to let off steam and siphon off the energy which is necessary to produce change. However, when marching is seen as a part of a program to dramatize an evil, to mobilize the forces of good will, and to generate pressure and power for change, marches will continue to be effective.</p>
<p>Our experience is that marches must continue over a period of thirty to forty-five days to produce any meaningful results. They must also be of sufficient size to produce some inconvenience to the forces in power or they go unnoticed. In other words, they must demand the attention of the press, for it is the press which interprets the issue to the community at large and thereby sets in motion the machinery for change.</p>
<p>Along with the march as a weapon for change in our nonviolent arsenal must be listed the boycott. Basic to the philosophy of nonviolence is the refusal to cooperate with evil. There is nothing quite so effective as a refusal to cooperate economically with the forces and institutions which perpetuate evil in our communities.</p>
<p>In the past six months simply by refusing to purchase products from companies which do not hire Negroes in meaningful numbers and in all job categories, the Ministers of Chicago under SCLC’s Operation Breadbasket have increased the income of the Negro community by more than two million dollars annually. In Atlanta the Negroes’ earning power has been increased by more than twenty million dollars annually over the past three years through a carefully disciplined program of selective buying and negotiations by the Negro minister. This is nonviolence at its peak of power, when it cuts into the profit margin of a business in order to bring about a more just distribution of jobs and opportunities for Negro wage earners and consumers.</p>
<p>But again, the boycott must be sustained over a period of several weeks and months to assure results. This means continuous education of the community in order that support can be maintained. People will work together and sacrifice if they understand clearly why and how this sacrifice will bring about change. We can never assume that anyone understands. It is our job to keep people informed and aware.</p>
<p>Our most powerful nonviolent weapon is, as would be expected, also our most demanding, that is organization. To produce change, people must be organized to work together in units of power. These units might be political, as in the case of voters’ leagues and political parties; they may be economic units such as groups of tenants who join forces to form a tenant union or to organize a rent strike; or they may be laboring units of persons who are seeking employment and wage increases.</p>
<p>More and more, the civil rights movement will become engaged in the task of organizing people into permanent groups to protect their own interests and to produce change in their behalf. This is a tedious task which may take years, but the results are more permanent and meaningful.</p>
<p>In the future we will be called upon to organize the unemployed, to unionize the business within the ghetto, to bring tenants together into collective bargaining units and establish cooperatives for purposes of building viable financial institutions within the ghetto that can be controlled by Negroes themselves.</p>
<p>There is no easy way to create a world where men and women can live together, where each has his own job and house and where all children receive as much education as their minds can absorb. But if such a world is created in our lifetime, it will be done in the United States by Negroes and white people of good will. It will be accomplished by persons who have the courage to put an end to suffering by willingly suffering themselves rather than inflict suffering upon others. It will be done by rejecting the racism, materialism and violence that has characterized Western civilization and especially by working toward a world of brotherhood, cooperation and peace.</p>
     </main>
<!-- /main column -->  <script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>  </div> <!-- /content --> 
  
</body></html>