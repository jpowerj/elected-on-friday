<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.8.25">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


    <title>time-for-freedom</title>
    <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.columns{display: flex; gap: min(4vw, 1.5em);}
      div.column{flex: auto; overflow-x: auto;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      ul.task-list li input[type="checkbox"] {
        width: 0.8em;
        margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
        vertical-align: middle;
      }
    </style>

    <style>
      body.hypothesis-enabled #quarto-embed-header {
        padding-right: 36px;
      }

      #quarto-embed-header {
        height: 3em;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: solid 1px;
      }

      #quarto-embed-header h6 {
        font-size: 1.1em;
        padding-top: 0.6em;
        margin-left: 1em;
        margin-right: 1em;
        font-weight: 400;
      }

      #quarto-embed-header a.quarto-back-link,
      #quarto-embed-header a.quarto-download-embed {
        font-size: 0.8em;
        margin-top: 1em;
        margin-bottom: 1em;
        margin-left: 1em;
        margin-right: 1em;
      }

      .quarto-back-container {
        padding-left: 0.5em;
        display: flex;
      }

      .headroom {
          will-change: transform;
          transition: transform 200ms linear;
      }

      .headroom--pinned {
          transform: translateY(0%);
      }

      .headroom--unpinned {
          transform: translateY(-100%);
      }      
    </style>

    <script>
    window.document.addEventListener("DOMContentLoaded", function () {

      var header = window.document.querySelector("#quarto-embed-header");
      const titleBannerEl = window.document.querySelector("body > #title-block-header");
      if (titleBannerEl) {
        titleBannerEl.style.paddingTop = header.clientHeight + "px";
      }
      const contentEl = window.document.getElementById('quarto-content');
      for (const child of contentEl.children) {
        child.style.paddingTop = header.clientHeight + "px";
        child.style.marginTop = "1em";
      }

      // Use the article root if the `back` call doesn't work. This isn't perfect
      // but should typically work
      window.quartoBackToArticle = () => {
        var currentUrl = window.location.href;
        window.history.back();
        setTimeout(() => {
            // if location was not changed in 100 ms, then there is no history back
            if(currentUrl === window.location.href){              
                // redirect to site root
                window.location.href = "../index.html";
            }
        }, 100);
      }

      const headroom = new window.Headroom(header, {
        tolerance: 5,
        onPin: function () {
        },
        onUnpin: function () {
        },
      });
      headroom.init();
    });
    </script>

    
<script src="../site_libs/manuscript-notebook/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-a74871fe4945b66d259aafc266475145.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
     
      </head>

  <body class="quarto-notebook quarto-light">
    <div id="quarto-embed-header" class="headroom fixed-top bg-primary">
      
      <a onclick="window.quartoBackToArticle(); return false;" class="btn btn-primary quarto-back-link" href=""><i class="bi bi-caret-left"></i> Back to Article</a>
      <h6><i class="bi bi-journal-code"></i> 1961-09-10_time-for-freedom.qmd</h6>

            <a href="../corpus_simple_qmd/1961-09-10_time-for-freedom.qmd" class="btn btn-primary quarto-download-embed" download="1961-09-10_time-for-freedom.qmd">Download Source</a>
          </div>

     <div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">    <p>The Time for Freedom Has Come</p>
<p>On a chill morning in the autumn of 1956, an elderly, toilworn Negro woman in Montgomery, Alabama, began her slow, painful four-mile walk to her job. It was the tenth month of the Montgomery bus boycott, which had begun with a life expectancy of one week. The old woman’s difficult progress led a passerby to inquire sympathetically if her feet were tired. Her simple answer became the boycotter’s watchword. “Yes, friend, my feet is real tired, but my soul is rested.”</p>
<p>Five years passed and once more Montgomery arrested the world’s attention. Now the symbolic segregationist is not a stubborn, rude bus driver. He emerges in 1961 as a hoodlum stomping the bleeding face of a freedom rider. But neither is the Negro today an elderly woman whose grammar is uncertain; rather, he is college-bred, Ivy League–clad, youthful, articulate and resolute. He has the imagination and drive of the young, tamed by discipline and commitment. The nation and the world have reacted with astonishment at these students cast from a new mold, unaware that a chain reaction was accumulating explosive force behind a strangely different facade.</p>
<p>Generating these changes is a phenomenon Victor Hugo described in these words: “There is no greater power on earth than an idea whose time has come.” In the decade of the sixties the time for freedom for the Negro has come. This simple truth illuminates the motivations, the tactics and the objectives of the students’ daring and imaginative movement.</p>
<p>The young Negro is not in revolt, as some have suggested, against a single pattern of timid, fumbling, conservative leadership. Nor is his conduct to be explained in terms of youth’s excesses. He is carrying forward a revolutionary destiny of a whole people consciously and deliberately. Hence the extraordinary willingness to fill the jails as if they were honors classes and the boldness to absorb brutality, even to the point of death, and remain nonviolent. His inner strength derives from his goal of freedom and the leadership role he has grasped even at a time when some of his white counterparts still grope in philosophical confusion searching for a personal goal with human values, searching for security from economic instability, and seeking relief from the haunting fear of nuclear destruction.</p>
<p>The campuses of Negro colleges are infused with a dynamism of both action and philosophical discussion. The needs of a surging period of change have had an impact on all Negro groups, sweeping away conventional trivialities and escapism.</p>
<p>Even in the thirties, when the college campus was alive with social thought, only a minority was involved in action. Now, during the sit-in phase, when a few students were suspended or expelled, more than one college saw the total student body involved in a walkout protest. This is a change in student activity of profound significance. Seldom, if ever, in American history has a student movement engulfed the whole student body of a college.</p>
<p>In another dimension, an equally striking change is altering the Negro campuses. Not long ago the Negro collegian imitated the white collegian. In attire, in athletics, in social life, imitation was the rule. For the future, he looked to a professional life cast in the image of the middle-class white professional. He imitated with such energy that Gunnar Myrdal described the ambitious Negro as “an exaggerated American.”</p>
<p>Today the imitation has ceased. The Negro collegian now initiates. Groping for unique forms of protest, he created the sit-ins and freedom rides. Overnight his white fellow students began to imitate him. As the movement took hold, a revival of social awareness spread across campuses from Cambridge to California. It spilled over the boundaries of the single issue of desegregation and encompassed questions of peace, civil liberties, capital punishment and others. It penetrated the ivy-covered walls of the traditional institutions as well as the glass and stainless-steel structures of the newly established colleges.</p>
<p>A consciousness of leadership, a sense of destiny have given maturity and dedication to this generation of Negro students which have few precedents. As a minister, I am often given promises of dedication. Instinctively I examine the degree of sincerity. The striking quality in Negro students I have met is the intensity and depth of their commitment. I am no longer surprised to meet attractive, stylishly dressed young girls whose charm and personality would grace a junior prom and to hear them declare in unmistakably sincere terms, “Dr.&nbsp;King, I am ready to die if I must.”</p>
<p>Many of the students, when pressed to express their inner feelings, identify themselves with students in Africa, Asia and South America. The liberation struggle in Africa has been the greatest single international influence on American Negro students. Frequently I hear them say that if their African brothers can break the bonds of colonialism, surely the American Negro can break Jim Crow.</p>
<p>African leaders such as President Kwame Nkrumah of Ghana, Governor General Nnamdi Azikiwe of Nigeria, Dr.&nbsp;Tom Mboya of Kenya and Dr.&nbsp;Hastings Banda of Nyasaland are popular heroes on most Negro college campuses. Many groups demonstrated or otherwise protested when the Congo leader, Patrice Lumumba, was assassinated. The newspapers were mistaken when they interpreted these outbursts of indignation as “Communist-inspired.”</p>
<p>Part of the impatience of Negro youth stems from their observation that change is taking place rapidly in Africa and other parts of the world, but comparatively slowly in the South. When the United States Supreme Court handed down its historic desegregation decision in 1954, many of us, perhaps naively, thought that great and sweeping school integration would ensue. Yet, today, seven years later, only seven percent of the Negro children of the South have been placed in desegregated schools. At the current rate it will take ninety-three more years to desegregate the public schools of the South. The collegians say, “We can’t wait that long” or simply, “We won’t wait!”</p>
<p>Negro students are coming to understand that education and learning have become tools for shaping the future and not devices of privilege for an exclusive few. Behind this spiritual explosion is the shattering of a material atom.</p>
<p>The future of the Negro college student has long been locked within the narrow walls of limited opportunity. Only a few professions could be practiced by Negroes and, but for a few exceptions, behind barriers of segregation in the North as well as the South. Few frustrations can compare with the experience of struggling with complex academic subjects, straining to absorb concepts which may never be used, or only half-utilized under conditions insulting to the trained mind. A Negro intern blurted out to me shortly after his patient died, “I wish I were not so well trained because then I would never know how many of these people need not die for lack of proper equipment, adequate post-operative care and timely admission. I’m not practicing good medicine. I’m presiding over tragedies which the absence of good medicine creates.”</p>
<p>The Negro lawyer knows his practice will bulk large with criminal cases. The law of wills, of corporations, of taxation will only infrequently reach his office because the clientele he serves has had little opportunity to accumulate property. In his courtroom experience in the South, his clients and witnesses will probably be segregated and he, as well as they, will seldom be referred to as “Mister.” Even worse, all too often he knows that the verdict was sealed the moment the arrest was made.</p>
<p>These are but a few examples of the real experience of the Negro professional, seen clearly by the student who has been asked to study with serious purpose. Obviously his incentive has been smothered and weakened. But today, more than ever, the Negro realizes that, while studying, he can also act to change the conditions which cripple his future. In the struggle to desegregate society he is altering it directly for himself as well as for future generations.</p>
<p>There is another respect in which the Negro student is benefiting, and simultaneously contributing to, society as a whole. He is learning social responsibility; he is learning to earn, through his own direct sacrifice, the result he seeks. There are those who would make him soft, pliable and conformist—a mechanical organization man or an uncreative status seeker. But the experience of Negro youth is as harsh and demanding as that of the pioneer on the untamed frontier. Because his struggle is complex, there is no place in it for the frivolous or rowdy. Knowledge and discipline are as indispensable as courage and self-sacrifice. Hence the forging of priceless qualities of character is taking place daily as a high moral goal is pursued.</p>
<p>Inevitably there will emerge from this caldron a mature man, experienced in life’s lessons, socially aware, unafraid of experimentation and, most of all, imbued with the spirit of service and dedication to a great ideal. The movement therefore gives to its participants a double education—academic learning from books and classes, and life’s lessons from responsible participation in social action. Indeed, the answer to the quest for a more mature, educated American, to compete successfully with the young people of other lands, may be present in this new movement.</p>
<p>Of course, not every student in our struggle has gained from it. This would be more than any humanly designed plan could realize. For some, the opportunity for personal advantage presented itself and their character was not equal to the challenge. A small percentage of students have found it convenient to escape from their own inadequacies by identifying with the sit-ins and other activities. They are, however, relatively few because this is a form of escape in which the flight from responsibility imposes even greater responsibilities and risks.</p>
<p>It is not a solemn life, for all of its seriousness. During a vigorous debate among a group of students discussing the moral and practical soundness of nonviolence, a majority rejected the employment of force. As the minority dwindled to a single student, he finally declared, “All I know is that, if rabbits could throw rocks, there would be fewer hunters in the forest.”</p>
<p>This is more than a witty remark to relieve the tensions of serious and even grim discussion. It expresses some of the pent-up impatience, some of the discontent and some of the despair produced by minute corrections in the face of enormous evil. Students necessarily have conflicting reactions. It is understandable that violence presents itself as a quick, effective answer for a few.</p>
<p>For the large majority, however, nonviolent, direct action has emerged as the better and more successful way out. It does not require that they abandon their discontent. This discontent is a sound, healthy social response to the injustice and brutality they see around them. Nonviolence offers a method by which they can fight the evil with which they cannot live. It offers a unique weapon which, without firing a single bullet, disarms the adversary. It exposes his moral defenses, weakens his morale, and at the same time works on his conscience.</p>
<p>Another weapon which Negro students have employed creatively in their nonviolent struggle is satire. It has enabled them to avoid corrosive anger while pressing the cutting edge of ridicule against the opponent. When they have been admonished to “go slow,” patiently to wait for gradual change, with a straight face they will assure you that they are diligently searching for the happy medium between the two extremes of moderation and gradualism.</p>
<p>It is perhaps the special quality of nonviolent direct action, which sublimates anger, that explains why so few students are attracted to extreme nationalist sects advocating black supremacy. The students have anger under controlling bonds of discipline. Hence they can answer appeals for cooling-off periods by advocating cooling-off for those who are hot with anger and violence.</p>
<p>Much has been made of the willingness of these devotees of nonviolent social action to break the law. Paradoxically, although they have embraced Thoreau’s and Gandhi’s civil disobedience on a scale dwarfing any past experience in American history, they do respect law. They feel a moral responsibility to obey just laws. But they recognize that there are also unjust laws.</p>
<p>From a purely moral point of view, an unjust law is one that is out of harmony with the moral law of the universe. More concretely, an unjust law is one in which the minority is compelled to observe a code that is not binding on the majority. An unjust law is one in which people are required to obey a code that they had no part in making because they were denied the right to vote.</p>
<p>In disobeying such unjust laws, the students do so peacefully, openly and nonviolently. Most important, they willingly accept the penalty, whatever it is, for in this way the public comes to reexamine the law in question and will thus decide whether it uplifts or degrades man.</p>
<p>This distinguishes their position on civil disobedience from the “uncivil disobedience” of the segregationist. In the face of laws they consider unjust, the racists seek to defy, evade and circumvent the law, and they are unwilling to accept the penalty. The end result of their defiance is anarchy and disrespect for the law. The students, on the other hand, believe that he who openly disobeys a law, a law conscience tells him is unjust, and then willingly accepts the penalty, gives evidence thereby that he so respects that law that he belongs in jail until it is changed. Their appeal is to the conscience.</p>
<p>Beyond this, the students appear to have perceived what an older generation overlooked in the role of law. The law tends to declare rights—it does not deliver them. A catalyst is needed to breathe life experience into a judicial decision by the persistent exercise of the rights until they become usual and ordinary in human conduct. They have offered their energies, their bodies to effect this result. They see themselves the obstetricians at the birth of a new order. It is in this manner that the students have related themselves to and materialized “the idea whose time has come.”</p>
<p>In a sense, the victories of the past two years have been spectacular and considerable. Because of the student sitters, more than 150 cities in the South have integrated their lunch counters. Actually, the current breakthroughs have come about partly as a result of the patient legal, civil and social ground clearing of the previous decades. Then, too, but slowly, the national government is realizing that our so-called domestic race relations are a major force in our foreign relations. Our image abroad reflects our behavior at home.</p>
<p>Many liberals, of the North as well as the South, when they list the unprecedented programs of the past few years, yearn for a “cooling-off” period; not too fast, they say, we may lose all that we have gained if we push faster than the violent ones can be persuaded to yield.</p>
<p>This view, though understandable, is a misreading of the goals of the young Negroes. They are not after “mere tokens” of integration (“tokenism,” they call it); rather theirs is a revolt against the whole system of Jim Crow and they are prepared to sit-in, kneel-in, wade-in and stand-in until every waiting room, rest room, theatre and other facility throughout the nation that is supposedly open to the public is in fact open to Negroes, Mexicans, Indians, Jews or what have you. Theirs is total commitment to this goal of equality and dignity. And for this achievement they are prepared to pay the costs—whatever they are—in suffering and hardship as long as may be necessary.</p>
<p>Indeed, these students are not struggling for themselves alone. They are seeking to save the soul of America. They are taking our whole nation back to those great wells of democracy which were dug deep by the Founding Fathers in the formulation of the Constitution and the Declaration of Independence. In sitting down at the lunch counters, they are in reality standing up for the best in the American dream. They courageously go to the jails of the South in order to get America out of the dilemma in which she finds herself as a result of the continued existence of segregation. One day historians will record this student movement as one of the most significant epics of our heritage.</p>
<p>But should we, as a nation, sit by as spectators when the social unrest seethes? Most of us recognize that the Jim Crow system is doomed. If so, would it not be the wise and human thing to abolish the system surely and swiftly? This would not be difficult, if our national government would exercise its full powers to enforce federal laws and court decisions and do so on a scale commensurate with the problems and with an unmistakable decisiveness. Moreover, we would need our religious, civic and economic leaders to mobilize their forces behind a real, honest-to-goodness “End Jim Crow Now” campaign.</p>
<p>This is the challenge of these young people to us and our ideals. It is also an expression of their new-found faith in themselves as well as in their fellow man.</p>
<p>In an effort to understand the students and to help them understand themselves, I asked one student I know to find a quotation expressing his feeling of our struggle. He was an inarticulate young man, athletically expert and far more poetic with a basketball than with words, but few would have found the quotation he typed on a card and left on my desk early one morning:</p>
<p>I sought my soul, but my soul I could not see,</p>
<p>I sought my God, but he eluded me,</p>
<p>I sought my brother, and I found all three.</p>
     </main>
<!-- /main column -->  <script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>  </div> <!-- /content --> 
  
</body></html>